/*
**************************************************************************
 sgcWebSocket component

 written by eSeGeCe
            copyright © 2013
            Email : info@esegece.com
            Web : http://www.esegece.com
**************************************************************************
*/
function sgcws_wamp(){if(arguments.length==0){return}if(arguments.length==1){if(typeof arguments[0]=="object"){arguments[0]["subprotocol"]="WAMP";sgcWebSocket.call(this,arguments)}else{if(typeof arguments[0]=="string"){arguments[1]="WAMP";sgcWebSocket.call(this,arguments[0],arguments[1])}}}else{if(arguments.length==2){if(typeof arguments[0]=="object"){arguments[0]["subprotocol"]=arguments[1]+".WAMP";sgcWebSocket.call(this,arguments)}else{if(typeof arguments[0]=="string"){arguments[1]=arguments[1]+".WAMP";sgcWebSocket.call(this,arguments[0],arguments[1])}}}}var d=this.send;this.prefix=function(i,h){arguments[0]=JSON.stringify([1,i,h]);d.apply(this,arguments)};this.call=function(i,h,j){if(i==""){i=GUID()}arguments[0]=JSON.stringify([2,i,h,j]);d.apply(this,arguments)};this.subscribe=function(h){arguments[0]=JSON.stringify([5,h]);d.apply(this,arguments)};this.unsubscribe=function(h){arguments[0]=JSON.stringify([6,h]);d.apply(this,arguments)};this.publish=function(h,j,k,i){arguments[0]=JSON.stringify([7,h,j,k,i]);d.apply(this,arguments)};var b=new event("onsgcmessage");var e=new event("onwampwelcome");var g=new event("onwampcallresult");var f=new event("onwampcallerror");var a=new event("onwampevent");this.on("message",function(i){var h=i.message;obj=JSON.parse(h);if(obj[0]==0){e.fire({name:"onwampwelcome",SessionId:obj[1],ProtocolVersion:obj[2],ServerIdent:obj[3]})}else{if(obj[0]==3){g.fire({name:"onwampcallresult",CallId:obj[1],CallResult:obj[2]})}else{if(obj[0]==4){f.fire({name:"onwampcallerror",CallId:obj[1],ErrorURI:obj[2],ErrorDesc:obj[3],ErrorDetails:obj[4]})}else{if(obj[0]==8){a.fire({name:"onwampevent",TopicURI:obj[1],Event:obj[2]})}else{b.fire({name:"onsgmessage",message:i.message})}}}}});var c=this.on;this.on=function(h,i){if(h=="sgcmessage"){b.subscribe(i)}else{if(h=="wampwelcome"){e.subscribe(i)}else{if(h=="wampcallresult"){g.subscribe(i)}else{if(h=="wampcallerror"){f.subscribe(i)}else{if(h=="wampevent"){a.subscribe(i)}else{c.apply(this,arguments)}}}}}}}sgcws_wamp.prototype=new sgcWebSocket();sgcws_wamp.prototype.constructor=sgcws_wamp;